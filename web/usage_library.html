<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>AVR-Ada Usage</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<style type="text/css">
  dt { font-weight: bold; }
</style>
</head>

<body text="#DCDEF2" link="#F0E59E" vlink="#C7B767" alink="#DEC3A9"
      bgcolor="#3A3C69">

<table width="95%" border="0" cellspacing="0" cellpadding="0" align="right">
 <tr>
  <td width="73%">
   <p>&nbsp;</p>
   <p>&nbsp;</p>
  </td>
  <td rowspan="2" width="27%">&nbsp; </td>
 </tr>
 <tr>
  <td width="73%">
<h1>Using the AVR-Ada library</h1>
<p>Have a look at the examples in the apps/ directory in order to see
how to specify the various paths to the run time system and the AVR
support library.</p>

<h2>Specify AVR Part</h2>
<p>Atmel has released more than 50 different AVR micrcontrollers in
different memory sizes, different internal capabilities, different
instrunctions, etc.  The user has to provide this information to the
compiler to refer to the correct ports and to make use of the correct
instruction set.  The standard way of providing this information is by
setting the option <code>-mmcu=</code>.</p>

<p><code>avr-gcc -c -mmcu=at90s2313 ... </code></p>

<p>If you want to refer to the symbolic names of the different ports
and registers in your Ada code, you have to "with" the corresponding
package specification.  You also have to "use" it depending on your
programming style.</p>

<p><code><b>with</b> AVR.AT90S2313; <b>use</b> AVR.AT90S2313;</code></p>

<p>When you write potentially reusable packages, you want to stay
independant of a specific MCU.  Otherwise the users have to change the
with and use clauses in all files that they use.  The preferred
programming style in this case is to refer to <code>AVR.MCU</code> in
your application code.</p>

<p><code><b>with</b> AVR.MCU; <b>use</b> AVR.MCU;</code></p>

<p>A corresponding file was automatically created in the AVR library
directory of your device at the installation.  It contains a renaming
of the part specific definitions of the used MCU.</p>

<p><code><b>with</b> AVR.AT90S2313;<br>
<b>package</b> AVR.MCU <b>renames</b> AVR.AT90S2313;</code></p>


<p>If you use the makefile and gpr file provided by AVR-Ada you don't
have to set that file manually.  Simply set the part name in the top of the
Makefile.  You can refer to AVR.MCU everywhere in your code.  When you
change the microcontroller in the project it is sufficient to change
only the corresponding definition at the top of your makefile.</p>

  </td>
 </tr>
 <tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>
   <P>
  </td>
  <td>
   <div align="right"></div>
  </td>
 </tr>
 <tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
</table>

</body>
</html>